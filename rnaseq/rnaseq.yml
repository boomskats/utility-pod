# rnaseq.yml
steps:
  - name: Configure Conda
    run: |
      wget https://repo.anaconda.com/archive/Anaconda3-2020.07-Linux-x86_64.sh
      bash Anaconda3-2020.07-Linux-x86_64.sh
      source ~/.bashrc
      conda list

  - name: Configure Conda Channels
    run: |
      conda config --add channels conda-forge
      conda config --add channels bioconda

  - name: Create and Activate Salmon Environment
    run: |
      conda create -n salmon -y salmon
      echo "source activate salmon" >> ~/.bashrc
      source ~/.bashrc

  - name: Install and Configure Tracer
    run: |
      curl -sSL https://setup.tracer.bio | bash -s -- 3Gf__nHYI-m1OiBzehxOY && . ~/.bashrc && tracer help
      source ~/.bashrc
      tracer --version

  - name: Setup Nextflow
    run: |
      curl -s https://get.sdkman.io | bash
      curl -s https://get.nextflow.io | bash
      chmod +x nextflow
      sudo mv nextflow /usr/local/bin
      nextflow info

  - name: Run Nextflow Pipeline
    run: |
      nextflow run ./rnaseq/main2.nf

authors:
  - "@tw599"
